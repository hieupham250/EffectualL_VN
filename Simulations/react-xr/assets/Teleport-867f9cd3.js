import{r as t,j as p,F as v,a as n}from"./index-871a1683.js";import{i as R,I as S,k as x,a2 as C,V as y,C as E,X as T}from"./XR-3a18f114.js";import{C as F}from"./Controllers-6f94e265.js";import"./GLTFLoader-6513b2d7.js";const B=new C;function M(){const d=t.useRef(),u=t.useRef(null),h=t.useRef(null);return x((o,b,i)=>{var f;d.current=i;const m=o.gl.xr.getReferenceSpace();(f=u.current)!=null||(u.current=m);const r=h.current;r&&m!==r&&o.gl.xr.setReferenceSpace(r)}),t.useCallback(o=>{var b;const i=u.current;if(i){const[f,m,r]=Array.from(o),s={x:-f,y:-m,z:-r},c=(b=d.current)==null?void 0:b.getViewerPose(i);c&&(s.x+=c.transform.position.x,s.z+=c.transform.position.z);const l=new XRRigidTransform(s,B);h.current=i.getOffsetReferenceSpace(l)}},[])}const k=t.forwardRef(function({leftHand:u=!1,rightHand:h=!1,maxDistance:o=10,size:b=.25,...i},f){const m=M(),r=t.useRef(null),s=t.useRef(),c=R(e=>e.camera),l=t.useCallback(e=>{var a;const g=(a=e.target.inputSource)==null?void 0:a.handedness;return!!((g!=="left"||u)&&(g!=="right"||h))},[u,h]);return t.createElement("group",{ref:f,...i},t.createElement("mesh",{ref:r,visible:!1,"rotation-x":-Math.PI/2},t.createElement("circleGeometry",{args:[b,32]}),t.createElement("meshBasicMaterial",{color:"white"})),t.createElement(S,{onMove:e=>{if(!l(e)||!e.intersection)return;const a=e.intersection.point.distanceTo(c.position);r.current.visible=a<=o,r.current.scale.setScalar(1),s.current=e.intersection.point,r.current.position.copy(s.current)},onHover:e=>{if(!l(e)||!e.intersection)return;const a=e.intersection.point.distanceTo(c.position);r.current.visible=a<=o,r.current.scale.setScalar(1)},onBlur:e=>{l(e)&&(r.current.visible=!1)},onSelectStart:e=>{if(!l(e)||!e.intersection)return;const a=e.intersection.point.distanceTo(c.position);r.current.visible=a<=o,r.current.scale.setScalar(1.1)},onSelectEnd:e=>{if(!l(e)||!s.current)return;r.current.visible=!0,r.current.scale.setScalar(1),s.current.distanceTo(c.position)<=o&&m(s.current)}},t.createElement("mesh",{"rotation-x":-Math.PI/2,visible:!1,scale:1e3},t.createElement("planeGeometry",null))))});function _(){return p(v,{children:[n(y,{onError:d=>console.error(d)}),p(E,{children:[n("color",{attach:"background",args:["black"]}),p(T,{children:[n(F,{}),n(k,{leftHand:!0}),p("mesh",{position:[1,0,0],children:[n("boxGeometry",{args:[.1,.1,.1]}),n("meshBasicMaterial",{color:"red"})]}),p("mesh",{position:[0,1,0],children:[n("boxGeometry",{args:[.1,.1,.1]}),n("meshBasicMaterial",{color:"green"})]}),p("mesh",{position:[0,0,1],children:[n("boxGeometry",{args:[.1,.1,.1]}),n("meshBasicMaterial",{color:"blue"})]}),n("ambientLight",{intensity:.5})]})]})]})}export{_ as default};
